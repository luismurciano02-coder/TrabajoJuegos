{% extends 'base.html.twig' %}

{% block title %}{{ juego.nombre }} - Juegos{% endblock %}

{% block body %}
<style>
    .juego-header {
        background: linear-gradient(135deg, #E43027 0%, #C41E1A 100%);
        color: white;
        padding: 40px;
        border-radius: 12px;
        margin-bottom: 30px;
        box-shadow: 0 8px 24px rgba(228, 48, 39, 0.3);
    }

    .juego-header h1 {
        margin: 0 0 15px 0;
        font-size: 2.5em;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .juego-info {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }

    .info-card {
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .info-card h3 {
        margin: 0 0 10px 0;
        color: #E43027;
        font-size: 0.9em;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .info-card p {
        margin: 0;
        font-size: 1.2em;
        font-weight: 600;
        color: #333;
    }

    .btn-group {
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
        margin-top: 20px;
    }

    .btn {
        padding: 12px 24px;
        border: none;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        text-decoration: none;
        display: inline-block;
        text-transform: uppercase;
        font-size: 0.9em;
        letter-spacing: 0.5px;
    }

    .btn-primary {
        background: linear-gradient(135deg, #E43027 0%, #C41E1A 100%);
        color: white;
    }

    .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 16px rgba(228, 48, 39, 0.4);
    }

    .btn-secondary {
        background: #444444;
        color: white;
    }

    .btn-secondary:hover {
        background: #555555;
        transform: translateY(-2px);
    }

    .ranking-section {
        background: white;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .ranking-section h2 {
        margin: 0 0 20px 0;
        color: #E43027;
        font-size: 1.8em;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .ranking-table {
        width: 100%;
        border-collapse: collapse;
    }

    .ranking-table thead {
        background-color: #E43027;
        color: white;
    }

    .ranking-table th {
        padding: 12px;
        text-align: left;
        font-weight: 600;
        border-bottom: 2px solid #E43027;
    }

    .ranking-table td {
        padding: 12px;
        border-bottom: 1px solid #eee;
    }

    .ranking-table tbody tr:hover {
        background-color: #f9f9f9;
    }

    .ranking-position {
        font-weight: 700;
        color: #E43027;
        font-size: 1.1em;
    }

    .ranking-position.gold {
        color: #FFD700;
        font-size: 1.3em;
    }

    .ranking-position.silver {
        color: #C0C0C0;
        font-size: 1.2em;
    }

    .ranking-position.bronze {
        color: #CD7F32;
        font-size: 1.1em;
    }

    .no-ranking {
        padding: 40px;
        text-align: center;
        color: #999;
    }

    .back-link {
        display: inline-block;
        margin-bottom: 20px;
        padding: 10px 16px;
        background-color: #444444;
        color: white;
        text-decoration: none;
        border-radius: 6px;
        font-weight: 600;
        transition: background-color 0.2s;
    }

    .back-link:hover {
        background-color: #555555;
    }
</style>

<a href="{{ path('app_juegos_index') }}" class="back-link">‚Üê VOLVER AL CAT√ÅLOGO</a>

<div class="juego-header">
    <h1>üéÆ {{ juego.nombre }}</h1>
    <p style="margin: 0; opacity: 0.95;">ID: {{ juego.id }} | Token: <code style="background: rgba(255,255,255,0.2); padding: 4px 8px; border-radius: 4px;">{{ juego.token }}</code></p>
</div>

<div class="juego-info">
    <div class="info-card">
        <h3>Estado</h3>
        <p style="color: {% if juego.activo %}#28a745{% else %}#dc3545{% endif %};">
            {% if juego.activo %}‚úì ACTIVO{% else %}‚úó INACTIVO{% endif %}
        </p>
    </div>
    <div class="info-card">
        <h3>ID del Juego</h3>
        <p>{{ juego.id }}</p>
    </div>
</div>

<div class="btn-group">
    <a href="{{ path('app_juegos_play', {'id': juego.id}) }}" class="btn btn-primary">‚ñ∂ JUGAR AHORA</a>
    {% if is_granted('ROLE_ADMIN') %}
        <a href="{{ path('app_juegos_edit', {'id': juego.id}) }}" class="btn btn-secondary">‚úèÔ∏è EDITAR</a>
        {{ include('juegos/_delete_form.html.twig') }}
    {% endif %}
</div>

<hr style="margin: 40px 0; border: none; border-top: 2px solid #eee;">

<!-- RANKING -->
<div class="ranking-section">
    <h2>üèÜ Ranking de Puntuaciones</h2>
    
    {% if puntuaciones|length > 0 %}
        <table class="ranking-table">
            <thead>
                <tr>
                    <th style="width: 50px;">Posici√≥n</th>
                    <th>Jugador</th>
                    <th style="width: 150px; text-align: right;">Puntuaci√≥n</th>
                    <th style="width: 150px; text-align: right;">Fecha</th>
                </tr>
            </thead>
            <tbody>
                {% for index, puntuacion in puntuaciones %}
                    <tr>
                        <td>
                            {% if index == 0 %}
                                <span class="ranking-position gold">ü•á 1¬∫</span>
                            {% elseif index == 1 %}
                                <span class="ranking-position silver">ü•à 2¬∫</span>
                            {% elseif index == 2 %}
                                <span class="ranking-position bronze">ü•â 3¬∫</span>
                            {% else %}
                                <span class="ranking-position">{{ index + 1 }}¬∫</span>
                            {% endif %}
                        </td>
                        <td>
                            <div style="margin-bottom: 4px;"><strong>{{ puntuacion.user.nombre|default(puntuacion.user.email) }}</strong></div>
                            <div style="color: #000; font-size: 0.9em;">{{ puntuacion.user.email }}</div>
                        </td>
                        <td style="text-align: right; font-weight: 600; color: #E43027;">{{ puntuacion.puntuacion }}</td>
                        <td style="text-align: right; color: #999;">{{ puntuacion.fecha|date('d/m/Y H:i') }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <div class="no-ranking">
            <p>A√∫n no hay puntuaciones para este juego. ¬°S√© el primero en jugar!</p>
        </div>
    {% endif %}
</div>

{% endblock %}

